Recorder

Приложения для записи пользовательских шагов в сценарий с возможностью последующего их повторения.


Для работы приложения требуется установка Java SE 11, которую можно скачать
с оффициального сайта Oracle https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html


Структура поставки:
    - config, папка с кофигурационными файлами
        - application.properties, файл с настройками приложения
        -log42j.xml, файл с настройками логгирования
    - lib, Java Archive приложения
    - logs, файлы логирования


Работает на MAC и Windows платформах. Поддерживаются следующие события:
    - нажатие клавиш на клавиатуре(в том числе комбинаций)
    - нажатие кнопок мышки
    - скроллинг колёсиков мышки(см. разъяснение ниже)

При записи скроллинга для начала надо кликнуть на ту область, которую будету скроллить.
Обычно кликать не надо, а только подвести мышь в нужную область, но для корректной записи
сценария надо подвести мышь и кликнуть левой кнопкой.


Приложения запускается в консольном режиме с ипользование(в поставке для каждой платформы будет только один из двух файлов):
    - recorder.command, для MAC
    - recorder.bat, для WIN


Для управления сценарием используются комбинации клавиш:
    |      Старт записи      |     Остановка записи
MAC | command+ctrl+shift+F9  | command+ctrl+shift+F10
WIN | alt+ctrl+shift+F9      | alt+ctrl+shift+F10


Типичные сообщения в логах
    - "Recorder - Started Recorder in 0.878 seconds (JVM running for 6.56)", приложение готово к работе
    - "ScenarioService - Start new scenario", запись сценария начата
    - "ScenarioService - Finish scenario", запись сценария окончена


Особенности записи сценария
1) В приложении не поддерживается автоматическая смена раскладки клавиатуры. То есть запись и воспроизведение
    сценария всегда нужно начинать с одинаковой раскладки.
2) Не работает запись нажатий кнопок:
    MAC:
        а) = на дополнительной клавиатуре
        б) - на дополнительной клавиатуре
        в) + на дополнительной клавиатуре
        г) caps lock
    WIN:
        а) - на дополнительной клавиатуре
        б) + на дополнительной клавиатуре


Диагностика неполадок
1) Расширенный сбор логов. Для этого необходимо в файле config/log4j2.xml изменить уровень логирования c info на trace:
    Было:
        <Loggers>
            <Root level="info" additivity="false">
                <AppenderRef ref="console" />
                <AppenderRef ref="file" />
            </Root>
            <Logger name="satt" level="info" />
        </Loggers>

    Стало:
        <Loggers>
            <Root level="info" additivity="false">
                <AppenderRef ref="console" />
                <AppenderRef ref="file" />
            </Root>
            <Logger name="satt" level="trace" />
        </Loggers>

2) Если приложение отваливается из-за нехватки памяти(сначало работает медленно, а потом вообще перестаёт),
    то в логах будет сообщение:
        java.lang.OutOfMemoryError: Java heap space
        Dumping heap to java_pidXXXX.hprof
    Нужно сохранить файл hprof для дальнейшей диагностики.
    Быстрое решение поднять память настройкой -Xmx128m -> -Xmx256m в файле запуска приложения.